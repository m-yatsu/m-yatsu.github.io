<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Blockly によるプログラミング (#8)</title>
    <script src="./assets/js/blockly/blockly_compressed.js"></script>
    <script src="./assets/js/blockly/blocks_compressed.js"></script>
    <script src="./assets/js/blockly/javascript_compressed.js"></script>
    <script src="./assets/js/blockly/msg/js/ja.js"></script>
</head>
<body>

<button type="button" onclick="evalCode()" style="font-size: 2em">実行する</button>
<div id="blocklyDiv" style="height: 900px; width: 1024px;"></div>
<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
  <category name="数と式" colour="#5b67a5">
    <block type="math_number">
      <field name="NUM">0</field>
    </block>
    <block type="math_arithmetic">
      <field name="OP">ADD</field>
      <value name="A">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="B">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
    <block type="math_modulo">
      <value name="DIVIDEND">
        <shadow type="math_number">
          <field name="NUM">64</field>
        </shadow>
      </value>
      <value name="DIVISOR">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
    </block>
    <block type="math_single">
      <field name="OP">ROOT</field>
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">9</field>
        </shadow>
      </value>
    </block>
  </category>
  <category name="条件と論理" colour="#5b80a5">
    <block type="controls_if"></block>
    <block type="logic_compare">
      <field name="OP">EQ</field>
    </block>
    <block type="logic_operation">
      <field name="OP">OR</field>
    </block>
	<block type="logic_compare" tooltip="空欄に指定した値の項目が，リストに含まれている">
      <field name="OP">NEQ</field>
      <value name="A">
        <block type="lists_indexOf">
          <field name="END">FIRST</field>
          <value name="VALUE">
            <block type="variables_get">
              <field name="VAR" id="10;KMk$]`SgK5PnX0$bb">list_nonprime</field>
            </block>
          </value>
        </block>
      </value>
      <value name="B">
        <block type="math_number">
          <field name="NUM">0</field>
        </block>
      </value>
    </block>
    <block type="logic_negate"></block>
  </category>
  <category name="繰り返し" colour="#5ba55b">
    <block type="controls_forEach">
      <field name="VAR" id="BmvJWAP[w$:U4,ZJ}mfY">i</field>
    </block>
    <block type="controls_for">
      <field name="VAR" id="#+F(UYkH;7,.8L#|1jU9">j</field>
      <value name="FROM">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="TO">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
      <value name="BY">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
	<block type="controls_flow_statements">
      <field name="FLOW">CONTINUE</field>
    </block>
  </category>
  <category name="テキスト" colour="#5ba58c">
    <block type="text">
      <field name="TEXT"></field>
    </block>
    <block type="text_join">
      <mutation items="2"></mutation>
    </block>
    <block type="text_print">
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
  </category>
  <category name="変数" colour="#a55b80">
    <block type="variables_set">
      <field name="VAR" id="a)aZyh|%}L$/ZdI;(vnN">x</field>
    </block>
    <block type="variables_set">
      <field name="VAR" id="10;KMk$]`SgK5PnX0$?{">list_100</field>
    </block>
    <block type="variables_get">
      <field name="VAR" id="a)aZyh|%}L$/ZdI;(vnN">x</field>
    </block>
	<block type="variables_get">
	  <field name="VAR" id="BmvJWAP[w$:U4,ZJ}mfY">i</field>
	</block>
    <block type="variables_get">
      <field name="VAR" id="#+F(UYkH;7,.8L#|1jU9">j</field>
    </block>
    <block type="variables_get">
      <field name="VAR" id="10;KMk$]`SgK5PnX0$?{">list_100</field>
    </block>
    <block type="variables_get">
      <field name="VAR" id="10;KMk$]`SgK5PnX0$aa">list_3n</field>
    </block>
    <block type="variables_get">
      <field name="VAR" id="10;KMk$]`SgK5PnX0$ab">list_5n</field>
    </block>
    <block type="variables_get">
      <field name="VAR" id="10;KMk$]`SgK5PnX0$ac">list_15n</field>
    </block>
	
    <block type="variables_get">
      <field name="VAR" id="10;KMk$]`SgK5PnX0$bc">list_greaterThan_j</field>
    </block>
    <block type="variables_get">
      <field name="VAR" id="10;KMk$]`SgK5PnX0$ba">list_prime</field>
    </block>
    <block type="variables_get">
      <field name="VAR" id="10;KMk$]`SgK5PnX0$bb">list_nonprime</field>
    </block>
    <block type="math_change">
      <field name="VAR" id="a)aZyh|%}L$/ZdI;(vnN">x</field>
      <value name="DELTA">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
  </category>
  <category name="リスト (配列)" colour="#745ba5">
    <block type="lists_create_with">
      <mutation items="0"></mutation>
    </block>
    <block type="lists_create_with">
      <mutation items="3"></mutation>
    </block>
	<block type="lists_indexOf">
      <field name="END">FIRST</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="FCPA-p`BCwiDh72h(9s.">list</field>
        </block>
      </value>
    </block>
    <block type="lists_setIndex">
      <mutation at="false"></mutation>
      <field name="MODE">INSERT</field>
      <field name="WHERE">LAST</field>
      <value name="LIST">
        <block type="variables_get">
          <field name="VAR" id="10;KMk$]`SgK5PnX0$?{">list_100</field>
        </block>
      </value>
    </block>
    <block type="lists_getSublist">
      <mutation at1="true" at2="false"></mutation>
      <field name="WHERE1">FROM_START</field>
      <field name="WHERE2">LAST</field>
      <value name="LIST">
        <block type="variables_get">
          <field name="VAR" id="10;KMk$]`SgK5PnX0$?{">list_100</field>
        </block>
      </value>
    </block>
	<block type="logic_compare" tooltip="空欄に指定した値の項目が，リストに含まれている">
      <field name="OP">NEQ</field>
      <value name="A">
        <block type="lists_indexOf">
          <field name="END">FIRST</field>
          <value name="VALUE">
            <block type="variables_get">
              <field name="VAR" id="10;KMk$]`SgK5PnX0$bb">list_nonprime</field>
            </block>
          </value>
        </block>
      </value>
      <value name="B">
        <block type="math_number">
          <field name="NUM">0</field>
        </block>
      </value>
    </block>
    <block type="lists_length"></block>
  </category>
  <category name="Variables" colour="#a55b80" custom="VARIABLE"></category>
</xml>

    <script>
        var toolbox = document.getElementById("toolbox");
        var workspace = Blockly.inject('blocklyDiv', {toolbox: document.getElementById('toolbox')});
    function evalCode () { 
        Blockly.JavaScript.addReservedWords('code');
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        try {
            eval(code);
        } catch(e) {
            alert( "実行時エラー:" + e );
        }
    }
    </script>
</body>
</html>
